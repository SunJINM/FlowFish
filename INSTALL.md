# 安装和使用说明

## 快速开始

### 1. 环境要求
- **Node.js**: 版本 16.0.0 或更高
- **操作系统**: Windows 10+, macOS 10.12+, 或 Ubuntu 18.04+
- **内存**: 至少 4GB RAM
- **显卡**: 支持硬件加速的显卡

### 2. 下载项目

```bash
# 方法1: 从 GitHub 下载
git clone https://github.com/your-repo/flow-fish.git
cd flow-fish

# 方法2: 直接下载ZIP文件并解压
```

### 3. 安装依赖

```bash
# 安装项目依赖
npm install

# 如果安装失败，可以尝试清理缓存
npm cache clean --force
npm install
```

### 4. 运行程序

```bash
# 开发模式（推荐第一次运行）
npm run dev

# 正式模式
npm start
```

## 详细使用教程

### 首次启动

1. **开发模式启动**
   ```bash
   npm run dev
   ```
   - 会显示调试窗口
   - 可以看到小鱼数量和控制按钮
   - 控制台显示详细日志

2. **检查小鱼显示**
   - 应该看到 4 条彩色小鱼在桌面上游动
   - 鼠标可以点击小鱼（开发模式下）
   - 小鱼会避开屏幕边缘

3. **系统托盘图标**
   - 查看任务栏右下角的托盘图标
   - 右键点击可以看到控制菜单

### 控制方式

#### 系统托盘菜单
- **显示小鱼** / **隐藏小鱼**: 切换小鱼的显示状态
- **重新开始**: 重置所有小鱼到初始状态
- **增加小鱼**: 添加一条新小鱼（最多20条）
- **减少小鱼**: 移除一条小鱼（最少保留1条）
- **关于 Flow Fish**: 打开项目网站
- **退出**: 完全关闭程序

#### 全局快捷键
- `Ctrl + Alt + F`: 快速显示/隐藏所有小鱼

#### 开发模式快捷键（仅开发模式下可用）
- `A`: 添加一条小鱼
- `R`: 移除一条小鱼  
- `C`: 重置所有小鱼
- `S`: 在控制台显示小鱼统计信息

### 小鱼行为说明

#### 基本行为
- **自由游泳**: 小鱼会在屏幕上随机游动
- **边界避让**: 自动避开屏幕边缘，不会游出可视范围
- **方向转换**: 定期改变游泳方向，路径更自然

#### 交互行为
- **点击反应**: 点击小鱼会有旋转动画并逃跑
- **惊吓传播**: 一条小鱼逃跑会影响附近的其他小鱼
- **群体聚集**: 小鱼会倾向于向同伴靠近，形成小群体

#### 个性化特征
每条小鱼都有独特的个性值（0-1），影响其行为：
- **活跃型** (0.7-1.0): 大范围移动，速度较快
- **中等型** (0.4-0.7): 中等范围活动
- **安静型** (0.0-0.4): 小范围缓慢游动

### 故障排除

#### 小鱼不显示
1. **检查进程**
   ```bash
   # Windows
   tasklist | findstr "electron"
   
   # macOS/Linux  
   ps aux | grep electron
   ```

2. **检查日志**
   - 开发模式下查看控制台输出
   - 寻找错误信息和警告

3. **重启程序**
   ```bash
   # 停止程序 (Ctrl+C)
   npm run dev
   ```

#### 透明效果问题
1. **Windows系统**
   - 确保启用了 Windows 透明效果
   - 更新显卡驱动程序
   - 检查是否禁用了桌面合成

2. **macOS系统**
   - 检查"减少透明度"设置是否关闭
   - 确保系统版本支持

3. **Linux系统**
   - 确认使用支持透明度的窗口管理器
   - 安装必要的图形库

#### 性能问题
1. **CPU使用率过高**
   - 减少小鱼数量（托盘菜单 → 减少小鱼）
   - 关闭其他占用资源的程序

2. **内存占用过大**
   - 重启 Flow Fish
   - 检查是否有内存泄露（开发模式下查看控制台）

3. **动画不流畅**
   - 检查显卡驱动是否最新
   - 降低系统显示缩放比例
   - 关闭不必要的视觉效果

### 高级设置

#### 修改小鱼数量
编辑 `fish.js` 文件：
```javascript
this.fishCount = 6; // 默认小鱼数量改为6
```

#### 调整游泳速度
```javascript
this.config = {
    minSpeed: 0.5,    // 最小速度
    maxSpeed: 2.0,    // 最大速度
    // ... 其他设置
};
```

#### 改变小鱼大小
编辑 `fish.css` 文件：
```css
.fish {
    width: 40px;   /* 小鱼宽度 */
    height: 28px;  /* 小鱼高度 */
}
```

### 卸载程序

#### 开发版本
```bash
# 删除项目文件夹
rm -rf flow-fish/

# 清理全局npm缓存（可选）
npm cache clean --force
```

#### 已安装版本
- **Windows**: 通过"添加或删除程序"卸载
- **macOS**: 将应用拖入废纸篓
- **Linux**: 删除 AppImage 文件

## 常见问题 FAQ

### Q: 小鱼会影响我的正常工作吗？
A: 不会。Flow Fish 使用透明穿透技术，鼠标点击会直接穿过小鱼到达下层窗口，完全不影响正常操作。

### Q: 如何临时隐藏小鱼？
A: 使用快捷键 `Ctrl + Alt + F`，或右键点击系统托盘图标选择"隐藏小鱼"。

### Q: 可以添加更多小鱼吗？
A: 可以，最多支持20条小鱼。通过托盘菜单或开发模式快捷键 `A` 添加。

### Q: 小鱼的颜色可以自定义吗？
A: 目前支持5种预设颜色（蓝色、橙色、绿色、紫色、黄色），可以通过修改CSS代码添加更多颜色。

### Q: 程序占用多少系统资源？
A: 正常情况下CPU占用 < 5%，内存占用 < 100MB，对系统性能影响很小。

### Q: 支持多显示器吗？
A: 目前只在主显示器上显示，多显示器支持正在开发中。

---

需要更多帮助？请查看 [GitHub Issues](https://github.com/your-repo/flow-fish/issues) 或联系开发团队。